/*!
 * Descensus 2 v1.0.2
 * Copyright (c) Tom W Hall 2017
 */
(function(a){var c={};function __webpack_require__(d){if(c[d]){return c[d].exports;}var f=c[d]={i:d,l:!1,exports:{}};a[d].call(f.exports,f,f.exports,__webpack_require__);f.l=!0;return f.exports;}__webpack_require__.m=a;__webpack_require__.c=c;__webpack_require__.i=function(h){return h;};__webpack_require__.d=function(l,m,n){if(!__webpack_require__.o(l,m)){Object.defineProperty(l,m,{configurable:!1,enumerable:!0,get:n});}};__webpack_require__.n=function(o){var p=o&&o.__esModule?function getDefault(){return o['default'];}:function getModuleExports(){return o;};__webpack_require__.d(p,'a',p);return p;};__webpack_require__.o=function(q,s){return Object.prototype.hasOwnProperty.call(q,s);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=36);})([function(t,u,v){"use strict";Object.defineProperty(u,"__esModule",{value:!0});const w={ball:new p2.Material(),wood:new p2.Material(),brick:new p2.Material(),saw:new p2.Material()};u.default=w;},function(z,A,B){"use strict";Object.defineProperty(A,"__esModule",{value:!0});function updateBodyPosition(C,D,E=0){resetBody(C);const F=C.position;F[0]=D[0];F[1]=D[1];C.angle=E;C.updateAABB();C.updateBoundingRadius();}function resetBody(G){G.setZeroForce();G.velocity[0]=0;G.velocity[1]=0;G.angularVelocity=0;}function limitVelocity(H){const I=14,J=250,K=H.bodies;for(let i=0;i<K.length;i++){const L=K[i],M=L.velocity,N=Math.abs(M[0]),O=Math.abs(M[1]);if(N>I||O>I){const P=Math.min(I/N,I/O);M[0]*=P;M[1]*=P;}if(L.angularVelocity>J){L.angularVelocity=J;}else if(L.angularVelocity<-J){L.angularVelocity=-J;}}}A.default={updateBodyPosition,resetBody,limitVelocity};},function(Q,R,S){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var T;(function(U){U[U["Girder"]=1]="Girder";U[U["Brick"]=2]="Brick";U[U["Seesaw"]=3]="Seesaw";U[U["Spinner"]=4]="Spinner";U[U["Snake"]=5]="Snake";U[U["FreeSaw"]=6]="FreeSaw";U[U["Saw"]=7]="Saw";U[U["SawSpinner"]=8]="SawSpinner";U[U["SawSnake"]=9]="SawSnake";U[U["Plus1Life"]=10]="Plus1Life";})(T||(T={}));R.default=T;},function(V,W,X){"use strict";Object.defineProperty(W,"__esModule",{value:!0});const Y=X(1);class TerrainObject{constructor(Z,a1,b1){this.active=!1;this.suspended=!1;this.type=Z;this.world=a1;this.pixiGraph=b1;this.bodies=[];this.constraints=[];}addBody(c1,d1,e1){d1.anchor=new PIXI.ObservablePoint(null,null,0.5,0.5);d1.visible=!1;c1.sprite=d1;e1.addChild(d1);c1.terrainObject=this;this.bodies.push(c1);}addBodyHidden(f1){f1.terrainObject=this;this.bodies.push(f1);}addShape(g1,h1,i1){i1=i1||{};const j1=i1.offset||[0,0],k1=i1.angle||0;h1.collisionGroup=i1.collisionOptions&&i1.collisionOptions.collisionGroup||1;h1.collisionMask=i1.collisionOptions&&i1.collisionOptions.collisionMask||1;g1.addShape(h1,j1,k1);}addConstraint(l1){this.constraints.push(l1);}getAABB(){const m1=new p2.AABB();for(let i=0,body;i<this.bodies.length;i++){body=this.bodies[i];if(body.aabbNeedsUpdate){body.updateAABB();}if(i===0){m1.copy(body.aabb);}else{m1.extend(body.aabb);}}return m1;}activate(...args){const p1=this.world,q1=this.bodies;for(let i=0,body;i<q1.length;i++){body=q1[i];p1.addBody(body);const s1=body.sprite;if(!s1)continue;s1.visible=!0;}const t1=this.constraints;for(let j=0;j<t1.length;j++){p1.addConstraint(t1[j]);}this.resume();this.active=!0;}deactivate(){const v1=this.world,w1=this.constraints;for(let i=0;i<w1.length;i++){v1.removeConstraint(w1[i]);}const z1=this.bodies;for(let j=0,body;j<z1.length;j++){body=z1[j];body.setZeroForce();body.velocity[0]=0;body.velocity[1]=0;body.angularVelocity=0;v1.removeBody(body);const B1=body.sprite;if(B1){B1.visible=!1;}}this.active=!1;}suspend(){const D1=this.bodies;for(let i=0,body;i<D1.length;i++){body=D1[i];if(body.allowSleep){body.sleep();}body.collisionResponse=!1;}this.suspended=!0;}resume(){const G1=this.bodies;for(let i=0,body;i<G1.length;i++){body=G1[i];if(body.allowSleep){body.wakeUp();Y.default.resetBody(body);}body.collisionResponse=!0;}this.suspended=!1;}}W.default=TerrainObject;},function(J1,K1,L1){"use strict";Object.defineProperty(K1,"__esModule",{value:!0});const M1={};function subscribe(N1,O1){if(!M1[N1]){M1[N1]=[];}if(M1[N1].indexOf(O1)===-1){M1[N1].push(O1);}}function unsubscribe(P1,Q1){if(!M1[P1])return;var R1=M1[P1].indexOf(Q1);if(R1!==-1){M1[P1].splice(R1,1);}}function publish(S1,T1){var U1=M1[S1];if(U1){for(var i=0,V1;i<U1.length;i++){V1=U1[i];V1(T1);}}}K1.default={subscribe,unsubscribe,publish};},function(X1,Y1,Z1){"use strict";Object.defineProperty(Y1,"__esModule",{value:!0});function getAnchor(a2){const b2=new p2.Body({mass:100});b2.gravityScale=0;const c2=new p2.Circle({radius:0.1});c2.sensor=!0;b2.addShape(c2);b2.terrainObject=a2.terrainObject;return b2;}function getAnchorConstraint(d2,e2,f2,g2=!1){f2=f2||[0,0];const h2=new p2.RevoluteConstraint(d2,e2,{localPivotA:f2,localPivotB:[0,0]});h2.collideConnected=!1;if(g2){h2.enableMotor();}return h2;}Y1.default={getAnchor,getAnchorConstraint};},function(i2,j2,k2){"use strict";Object.defineProperty(j2,"__esModule",{value:!0});const l2=1,m2=new MersenneTwister(l2);function reseed(){m2.seed(l2);}function random0To1(){return m2.rnd();}function randomNeg1ToPos1(){return(m2.rnd()-0.5)*2;}function randomSign(){return randomInt(1,2)===1?-1:1;}function randomInt(n2,o2){const r=m2.rnd();return Math.floor(r*(o2-n2+1))+n2;}function randomBoolean(){return randomInt(1,2)===1;}j2.default={reseed,random0To1,randomNeg1ToPos1,randomSign,randomInt,randomBoolean};},function(q2,r2,s2){"use strict";Object.defineProperty(r2,"__esModule",{value:!0});var t2;(function(u2){u2[u2["blue"]=6724095]="blue";u2[u2["yellow"]=16108847]="yellow";u2[u2["orange"]=16607755]="orange";u2[u2["red"]=16729156]="red";})(t2||(t2={}));r2.default=t2;},function(v2,w2,z2){"use strict";Object.defineProperty(w2,"__esModule",{value:!0});const A2=z2(0),B2=z2(1),C2=z2(4);let D2,E2,F2,G2,H2,I2,J2,K2,L2,M2,N2=!1;function initialize(O2,P2,Q2){D2=P2.stage;E2=P2.container;F2=P2.barContainer;J2=new p2.Body({mass:20000,position:[-999999,0]});J2.gravityScale=0;J2.allowSleep=!1;K2=new p2.Box({width:0.25,height:0.25});K2.material=A2.default.wood;J2.addShape(K2);L2=new PIXI.Sprite(Q2.bar);L2.width=K2.width*64;L2.height=K2.height*64;L2.anchor=new PIXI.ObservablePoint(null,null,0.5,0.5);P2.barContainer.addChild(L2);J2.sprite=L2;M2=!0;O2.addBody(J2);O2.on('beginContact',beginContact,this);addTouchHandlers();}function click(e){if(!M2)return;M2=!1;K2.sensor=!0;const R2=e.data.getLocalPosition(D2);G2=getWorldPosition(R2);H2=[G2[0],G2[1]];I2=new PIXI.Point(R2.x,R2.y);update();}function drag(e){if(M2)return;const S2=e.data.getLocalPosition(D2);I2.x=S2.x;I2.y=S2.y;K2.sensor=!1;}function update(){if(M2)return;const T2=getWorldPosition(I2);if(T2[0]===H2[0]&&T2[1]===H2[1])return;H2[0]=T2[0];H2[1]=T2[1];const x1=G2[0],y1=G2[1],x2=H2[0],y2=H2[1],Y2=x2-x1,Z2=y2-y1;J2.position[0]=(x1+x2)/2;J2.position[1]=(y1+y2)/2;J2.angle=Math.atan2(Z2,Y2);const a3=Math.max(0.25,Math.sqrt(Y2*Y2+Z2*Z2));K2.width=a3;const b3=K2;b3.vertices[0][0]=-a3/2;b3.vertices[0][1]=-0.125;b3.vertices[1][0]=a3/2;b3.vertices[1][1]=-0.125;b3.vertices[2][0]=a3/2;b3.vertices[2][1]=0.125;b3.vertices[3][0]=-a3/2;b3.vertices[3][1]=0.125;b3.updateTriangles();b3.updateCenterOfMass();b3.updateBoundingRadius();b3.updateArea();J2.updateAABB();J2.updateBoundingRadius();L2.position.x=J2.position[0]*64;L2.position.y=-J2.position[1]*64;L2.width=a3*64;}function finalize(){if(M2)return;update();window.setTimeout(()=>{B2.default.resetBody(J2);},50);M2=!0;}function hide(){B2.default.updateBodyPosition(J2,[-999999,0]);}function getWorldPosition(c3){const d3=E2.position;return[(c3.x-d3.x)/64,(d3.y-c3.y)/64];}function addTouchHandlers(){function onTouch(e){if(!N2)return;click(e);}function onDrag(e){if(!N2)return;drag(e);}function onRelease(e){if(!N2)return;finalize();}F2.on('touchstart',onTouch);F2.on('touchmove',onDrag);F2.on('touchend',onRelease);F2.on('touchendoutside',onRelease);F2.on('mousedown',onTouch);F2.on('mousemove',onDrag);F2.on('mouseup',onRelease);F2.on('mouseupoutside',onRelease);}function beginContact(e3){if(M2)return;const f3=e3.bodyA,g3=e3.bodyB,h3=J2;if(!(f3===h3||g3===h3))return;if(K2.sensor){hide();return;}finalize();}C2.default.subscribe('State.IsActive',i3=>{N2=i3;});w2.default={initialize,update,finalize,hide};},function(j3,k3,l3){"use strict";Object.defineProperty(k3,"__esModule",{value:!0});const m3=l3(4);let n3=null,o3=!1,p3=!1;m3.default.subscribe('Sound.Toggle',()=>{toggle();});function initialize(q3){n3=q3;o3=!0;p3=!0;for(let r3 in n3){const s3=n3[r3];s3.hackPlaying=!1;s3.hackPaused=!0;s3.onplaying=()=>{s3.hackPlaying=!0;s3.hackPaused=!1;};s3.onpause=()=>{s3.hackPlaying=!1;s3.hackPaused=!0;};}}function play(t3,u3=!1){if(!o3||!p3)return;const v3=n3[t3];if(!u3){v3.currentTime=0;}if(v3.hackPaused){if(v3===n3.clock){v3.loop=!0;}v3.play();}}function pause(w3){if(!o3)return;const x3=n3[w3];if(!x3.hackPaused){x3.pause();};}function stop(y3){if(!o3)return;const z3=n3[y3];z3.pause();z3.currentTime=0;}function pauseAll(){for(let A3 in n3){pause(A3);}}function resumeAll(){for(let B3 in n3){const C3=n3[B3];if(C3.paused&&C3.currentTime>0&&!C3.ended){play(B3,!0);}}}function stopAll(){for(let D3 in n3){stop(D3);}}function toggle(){if(!o3)return;p3=!p3;m3.default.publish('Sound.Enable',p3);}k3.default={initialize,play,pause,stop,pauseAll,resumeAll,stopAll,toggle};},function(E3,F3,G3){"use strict";Object.defineProperty(F3,"__esModule",{value:!0});const H3=G3(2),I3=G3(6),J3=G3(32),K3=G3(1),L3=G3(26),M3=G3(24),N3=G3(31),O3=G3(13),P3=G3(12),Q3=G3(25),R3=G3(28),S3=G3(30),T3=G3(29),U3=G3(27),V3=G3(35);let W3,X3,Y3,Z3,a4,b4,c4,d4,e4,f4,g4,h4,i4=[];const j4={},k4=[];let l4;const m4=[{startY:600,endY:575,strength:1.5},{startY:500,endY:475,strength:-1.75},{startY:350,endY:325,strength:2},{startY:275,endY:250,strength:-2.25},{startY:100,endY:75,strength:2.5},{startY:75,endY:50,strength:-2.75}];function createTerrainObjects(n4,o4){const p4=[];for(let i=0;i<o4;i++){p4.push(n4());}return p4;}function getActiveCount(q4){let r4=0;for(let i=0;i<q4.length;i++){if(q4[i].active)r4++;}return r4;}function initialize(s4,t4,u4){W3=s4;X3=t4;Y3=createTerrainObjects(()=>new L3.default(W3,t4,u4),20);Z3=createTerrainObjects(()=>new M3.default(W3,t4,u4),6);a4=createTerrainObjects(()=>new N3.default(W3,t4,u4),8);b4=createTerrainObjects(()=>new O3.default(W3,t4,u4),8);c4=createTerrainObjects(()=>new Q3.default(W3,t4,u4),4);d4=createTerrainObjects(()=>new R3.default(W3,t4,u4),20);e4=createTerrainObjects(()=>new S3.default(W3,t4,u4),8);h4=createTerrainObjects(()=>new U3.default(W3,t4,u4),2);f4=createTerrainObjects(()=>{const v4=0.5+I3.default.random0To1(),w4=(1+I3.default.random0To1())*1000;return new P3.default(W3,t4,u4,v4,w4);},8);g4=createTerrainObjects(()=>{const x4=0.5+I3.default.random0To1(),y4=(1+I3.default.random0To1())*1000;return new T3.default(W3,t4,u4,x4,y4);},6);i4=f4.concat(g4);j4[H3.default.Girder]=Y3;j4[H3.default.Brick]=Z3;j4[H3.default.Seesaw]=a4;j4[H3.default.Spinner]=b4;j4[H3.default.FreeSaw]=c4;j4[H3.default.Saw]=d4;j4[H3.default.SawSpinner]=e4;j4[H3.default.Snake]=f4;j4[H3.default.SawSnake]=g4;j4[H3.default.Plus1Life]=h4;k4.push.apply(k4,[Y3,Z3,a4,b4,f4,c4,d4,e4,g4,h4]);l4=V3.default.initialize(W3,X3,u4);}function update(z4,A4){const B4=16,C4=new p2.AABB();C4.lowerBound[0]=A4.lowerBound[0]-B4;C4.lowerBound[1]=A4.lowerBound[1]-B4;C4.upperBound[0]=A4.upperBound[0]+B4;C4.upperBound[1]=A4.upperBound[1]+B4;setObjectStates(A4,C4);J3.default.updateAABBs(W3);const D4=A4.lowerBound[0],E4=A4.upperBound[0],F4=A4.upperBound[1],G4=A4.lowerBound[1],H4=C4.lowerBound[0],I4=C4.upperBound[0],J4=C4.upperBound[1],K4=C4.lowerBound[1],L4=new p2.AABB({lowerBound:[H4,F4],upperBound:[I4,J4]}),M4=new p2.AABB({lowerBound:[H4,K4],upperBound:[I4,G4]}),N4=new p2.AABB({lowerBound:[H4,G4],upperBound:[D4,F4]}),O4=new p2.AABB({lowerBound:[E4,G4],upperBound:[I4,F4]});populateArea(L4);populateArea(M4);populateArea(N4);populateArea(O4);dropBricks(L4);throwSaws(N4,O4,M4);applyWind(z4);agitateSnakes();positionGround(z4);}function positionGround(P4){const Q4=Math.round(P4.position[0]/16)*16,R4=[Q4,-10];K3.default.updateBodyPosition(l4,R4);}function deployTerrainObject(S4,T4,U4,V4,W4,X4,...args){const Y4=j4[S4];if(getActiveCount(Y4)<T4){for(let i=0;i<Y4.length;i++){const Z4=Y4[i];if(!Z4.active){const a5=J3.default.getRandomPosition(W3,U4,V4,W4,X4);if(a5!==null){const b5=[a5].concat(args);Z4.activate.apply(Z4,b5);}return;}}throw new Error('TerrainObjectPool of type '+S4+' empty');}}function deployGirder(c5,d5,e5){const f5=I3.default.random0To1()*(Math.PI*2);deployTerrainObject(H3.default.Girder,d5,c5,5,5,e5,f5);}function deployBrick(g5,h5,i5){const j5=I3.default.random0To1()*(Math.PI*2);deployTerrainObject(H3.default.Brick,h5,g5,5,5,i5,j5);}function deploySeesaw(k5,l5,m5){const n5=I3.default.randomBoolean(),o5=n5?1:6,p5=n5?6:1;deployTerrainObject(H3.default.Seesaw,l5,k5,o5,p5,m5,n5);}function deploySpinner(q5,r5,s5){const t5=I3.default.randomInt(200,250)*I3.default.randomSign();deployTerrainObject(H3.default.Spinner,r5,q5,7,7,s5,t5);}function deploySnake(u5,v5,w5){const x5=I3.default.randomInt(40,60)*I3.default.randomSign(),y5=I3.default.randomInt(2500,5000);deployTerrainObject(H3.default.Snake,v5,u5,0.5,14.5,w5,x5,y5);}function deployFreeSaw(z5,A5,B5,C5){deployTerrainObject(H3.default.FreeSaw,A5,z5,1,1,B5,C5);}function deploySaw(D5,E5,F5){deployTerrainObject(H3.default.Saw,E5,D5,2,2,F5);}function deploySawSpinner(G5,H5,I5){const J5=I3.default.randomInt(200,250)*I3.default.randomSign();deployTerrainObject(H3.default.SawSpinner,H5,G5,9,9,I5,J5);}function deploySawSnake(K5,L5,M5){const N5=I3.default.randomInt(40,60)*I3.default.randomSign(),O5=I3.default.randomInt(2500,5000);deployTerrainObject(H3.default.SawSnake,L5,K5,2,14.5,M5,N5,O5);}function deployPlus1Life(P5,Q5,R5){deployTerrainObject(H3.default.Plus1Life,Q5,P5,2,2,R5);}function populateArea(S5){const T5=J3.default.getMidHeight(S5),U5=J3.default.getCountLessAsDescends(T5,4,6,1000);deploySawSnake(S5,J3.default.getCountMoreAsDescends(T5,3,6,250),U5);deploySawSpinner(S5,J3.default.getCountLessAsDescends(T5,2,8,500),U5);deploySnake(S5,J3.default.getCountLessAsDescends(T5,1,8,600),U5);deploySpinner(S5,J3.default.getCountLessAsDescends(T5,1,8,800),U5);deploySeesaw(S5,J3.default.getCountLessAsDescends(T5,1,8,900),U5);deployGirder(S5,J3.default.getCountLessAsDescends(T5,1,20,1000),U5);deploySaw(S5,J3.default.getCountLessAsDescends(T5,20,2,1000),U5);deployPlus1Life(S5,J3.default.getCountMoreAsDescends(T5,1,2,500),U5);}function dropBricks(V5){const W5=J3.default.getMidHeight(V5),X5=J3.default.getCountMoreAsDescends(W5,2,6,975);if(X5===0)return;const Y5=new p2.AABB();Y5.copy(V5);Y5.upperBound[1]-=12;Y5.lowerBound[0]+=4;Y5.upperBound[0]-=4;deployBrick(V5,X5,1);}function throwSaws(Z5,a6,b6){const c6=J3.default.getMidHeight(Z5),d6=J3.default.getCountMoreAsDescends(c6,2,4,975);if(d6===0)return;{const e6=I3.default.randomBoolean(),f6=new p2.AABB();f6.copy(e6?Z5:a6);f6.lowerBound[1]+=14;if(e6){f6.lowerBound[0]+=13;}else{f6.upperBound[0]-=13;}const g6=10,h6=I3.default.random0To1(),i6=e6?[g6,h6]:[-g6,h6];deployFreeSaw(f6,d6,1,i6);}{const j6=new p2.AABB();j6.copy(b6);j6.lowerBound[1]+=25;j6.lowerBound[0]+=4;j6.upperBound[0]-=4;const k6=20,l6=I3.default.random0To1(),m6=[l6,k6];deployFreeSaw(b6,d6,1,m6);}}function applyWind(n6){let o6=[];const p6=W3.bodies;for(let j=0;j<p6.length;j++){const q6=p6[j];if(q6.sprite&&q6.sprite.visible){o6.push(q6);}}X3.windLeft.visible=!1;X3.windRight.visible=!1;const r6=n6.position[1];for(let i=0;i<m4.length;i++){const s6=m4[i];if(r6<=s6.startY&&r6>=s6.endY){for(let k=0;k<o6.length;k++){const t6=o6[k];t6.applyForce([s6.strength,0],[0,0]);}if(s6.strength<0){X3.windRight.visible=!0;}else{X3.windLeft.visible=!0;}break;}}}function agitateSnakes(){for(let i=0;i<i4.length;i++){const u6=i4[i];if(u6.active){u6.agitate();}}}function setObjectStates(v6,w6){for(let i=0;i<k4.length;i++){const x6=k4[i];for(let j=0;j<x6.length;j++){const y6=x6[j];if(y6.active){const z6=y6.getAABB();if(z6.upperBound[0]<w6.lowerBound[0]||z6.lowerBound[0]>w6.upperBound[0]||z6.lowerBound[1]>w6.upperBound[1]||z6.upperBound[1]<w6.lowerBound[1]){y6.deactivate();}else if(z6.upperBound[0]<v6.lowerBound[0]||z6.lowerBound[0]>v6.upperBound[0]||z6.lowerBound[1]>v6.upperBound[1]||z6.upperBound[1]<v6.lowerBound[1]){y6.suspend();}else{if(y6.suspended){y6.resume();}}}}}}function deactivateAll(){for(let i=0;i<k4.length;i++){const A6=k4[i];for(let j=0;j<A6.length;j++){const B6=A6[j];if(B6.active){B6.deactivate();}}}}F3.default={initialize,update,deactivateAll};},function(C6,D6,E6){"use strict";Object.defineProperty(D6,"__esModule",{value:!0});const F6=16,G6=28,H6=64,I6=F6*H6,J6=G6*H6,K6={transparent:!1,backgroundColor:0x000000},L6=new PIXI.WebGLRenderer(I6,J6,K6),M6=L6.view;M6.id='viewport';M6.style.display='none';M6.style.marginLeft='auto';M6.style.marginRight='auto';document.body.appendChild(M6);function resizeView(){resize(L6);}window.addEventListener('resize',()=>{resizeView();});window.addEventListener('orientationchange',()=>{resizeView();});resizeView();function resize(N6){const O6=window.innerWidth,P6=window.innerHeight,Q6=N6.view,R6=O6/P6,S6=N6.width/N6.height;if(R6>S6){Q6.style.width=Math.floor(P6*S6)+'px';Q6.style.height=P6+'px';}else{Q6.style.width=O6+'px';Q6.style.height=Math.floor(O6/S6)+'px';}}D6.default=L6;},function(T6,U6,V6){"use strict";Object.defineProperty(U6,"__esModule",{value:!0});const W6=V6(3),X6=V6(2),Y6=V6(0),Z6=V6(5),a7=V6(1);class Snake extends W6.default{constructor(b7,c7,d7,e7,f7){super(X6.default.Snake,b7,c7);this.segmentCount=4;this.segments=[];this.agitateCycle=f7;let g7=null;for(let i=0,twoByFourBody;i<this.segmentCount;i++){twoByFourBody=new p2.Body({mass:0.5});twoByFourBody.gravityScale=0;const i7=new PIXI.Sprite(d7.twoByFour);this.addBody(twoByFourBody,i7,c7.twoByFourContainer);this.segments.push(twoByFourBody);const j7=new p2.Box({width:0.5,height:4});j7.material=Y6.default.wood;this.addShape(twoByFourBody,j7);if(g7===null){const k7=this.anchorBody=Z6.default.getAnchor(twoByFourBody);this.addBodyHidden(k7);const l7=this.anchorConstraint=Z6.default.getAnchorConstraint(twoByFourBody,k7,[1.75,0],!0);this.addConstraint(l7);}else{const m7=new p2.RevoluteConstraint(twoByFourBody,g7,{localPivotA:[0,1.75],localPivotB:[0,-1.75]});m7.collideConnected=!1;const n7=Math.PI/4;m7.setLimits(-n7,n7);this.addConstraint(m7);}g7=twoByFourBody;}}scheduleAgitate(){this.nextAgitateTime=performance.now()+this.agitateCycle;}agitate(){if(!this.active||performance.now()<this.nextAgitateTime)return;this.anchorConstraint.setMotorSpeed(-this.anchorConstraint.getMotorSpeed());this.scheduleAgitate();}activate(p7,q7,r7){super.activate();const s7=this.segmentCount*3.5+0.5,t7=[p7[0],p7[1]+s7/2-2];a7.default.updateBodyPosition(this.anchorBody,[t7[0],t7[1]+1.75]);const u7=this.segments;for(let i=0;i<u7.length;i++){a7.default.updateBodyPosition(u7[i],[t7[0],t7[1]-i*3.5]);}this.anchorConstraint.setMotorSpeed(q7);this.agitateCycle=r7;this.scheduleAgitate();}}U6.default=Snake;},function(v7,w7,x7){"use strict";Object.defineProperty(w7,"__esModule",{value:!0});const y7=x7(3),z7=x7(2),A7=x7(0),B7=x7(5),C7=x7(1);class Spinner extends y7.default{constructor(D7,E7,F7){super(z7.default.Spinner,D7,E7);const G7=new p2.Body({mass:6});G7.gravityScale=0;const H7=new PIXI.Sprite(F7.spinner);H7.isSpinner=!0;this.addBody(G7,H7,E7.spinnerContainer);this.spinnerBody=G7;const I7=new p2.Box({width:6,height:1});I7.material=A7.default.wood;this.addShape(G7,I7);const J7=new p2.Box({width:6,height:1});J7.material=A7.default.wood;this.addShape(G7,J7,{angle:-Math.PI/2});const K7=this.anchorBody=B7.default.getAnchor(G7);this.addBodyHidden(K7);const L7=this.anchorConstraint=B7.default.getAnchorConstraint(G7,K7,null,!0);this.addConstraint(L7);}activate(M7,N7){super.activate();C7.default.updateBodyPosition(this.spinnerBody,M7);C7.default.updateBodyPosition(this.anchorBody,M7);this.anchorConstraint.setMotorSpeed(N7);}}w7.default=Spinner;},function(O7,P7,Q7){"use strict";Object.defineProperty(P7,"__esModule",{value:!0});var R7=new Promise((S7,T7)=>{const U7=new PIXI.loaders.Loader();U7.add('Constantia','fonts/Constantia/Constantia.fnt');U7.load((V7,W7)=>{S7();});});P7.default=R7;},function(X7,Y7,Z7){"use strict";Object.defineProperty(Y7,"__esModule",{value:!0});var a8=new Promise((b8,c8)=>{if(!window.cordova){c8('Web context, no sound');return;}const d8=document.createElement('audio'),e8=!!(d8.canPlayType&&d8.canPlayType('audio/mpeg;').replace(/no/,'')),f8=!!(d8.canPlayType&&d8.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,''));if(!e8&&!f8){c8('Neither MP3 nor OGG supported');return;}const g8=1;let h8=0;const i8=e8?'.mp3':'.ogg',j8={saw:loadSound('saw'),checkpoint:loadSound('checkpoint'),lostLife:loadSound('lost-life'),gainedLife:loadSound('gained-life'),clock:loadSound('clock'),alarm:loadSound('alarm'),won:loadSound('won'),lost:loadSound('lost')};function loadSound(k8){const l8=new Audio();l8.src='sound/'+k8+i8;l8.addEventListener('canplaythrough',function(){h8++;if(h8===g8){b8(j8);}});l8.load();return l8;}});Y7.default=a8;},function(m8,n8,o8){"use strict";Object.defineProperty(n8,"__esModule",{value:!0});var p8=new Promise((q8,r8)=>{const s8=new PIXI.loaders.Loader();s8.add('ball','img/ball.png');s8.add('ballReflections','img/ball-reflections.png');s8.add('girder','img/girder.png');s8.add('brick','img/brick.png');s8.add('seesaw','img/seesaw.png');s8.add('spinner','img/spinner.png');s8.add('saw','img/saw.png');s8.add('sawSmall','img/saw-small.png');s8.add('twoByFour','img/two-by-four.png');s8.add('clouds','img/clouds.jpg');s8.add('bar','img/bar.png');s8.add('helpHand','img/help-hand.png');s8.add('plus1Life','img/plus-1-life.png');s8.add('windLeft','img/wind-left.png');s8.add('windRight','img/wind-right.png');s8.add('timeBar','img/time-bar.png');s8.add('timeBarTime','img/time-bar-time.png');s8.add('ground','img/ground.png');s8.add('paper','img/paper.jpg');s8.load((t8,u8)=>{const v8={};for(var w8 in u8){v8[w8]=u8[w8].texture;}q8(v8);});});n8.default=p8;},function(x8,y8,z8){"use strict";Object.defineProperty(y8,"__esModule",{value:!0});const A8=z8(22),B8=z8(6),C8=z8(9),D8=z8(11),E8=z8(8),F8=z8(10),G8=z8(7),H8=z8(34),I8=z8(1),J8=z8(4),K8=1000,L8=5;let M8=K8,N8=L8,O8=null,P8=null,Q8=null,R8,S8=!1,T8=null,U8,V8=[],W8=null,X8=null,Y8,Z8=new p2.AABB(),a9,b9,c9,d9;function initialize(e9,f9,g9){W8=e9;X8=f9;Y8=g9;document.addEventListener('visibilitychange',handleVisibilityChange,!1);X8.terrainContainer.visible=!1;c9=A8.default.Active;setState(A8.default.Intro);C8.default.play('saw');requestAnimationFrame(animate);}function handleVisibilityChange(e){const h9=e.target,i9=h9.visibilityState;if(i9==='visible'){a9=performance.now();C8.default.resumeAll();setState(d9);}else{d9=b9;C8.default.pauseAll();setState(A8.default.PageHidden);}}function animate(j9){requestAnimationFrame(animate);if(b9===A8.default.PageHidden)return;const k9=1/60;let l9=j9-(a9||j9);a9=j9;switch(b9){case A8.default.Active:const m9=X8.container.position,n9=Y8.position[0],o9=Y8.position[1];processInvincibility(l9);updateScreenAABB();E8.default.update();F8.default.update(Y8,Z8);W8.step(k9,l9/1000,5);I8.default.limitVelocity(W8);processHeightChange(o9);processCheckpoints(o9,l9);setScroll(n9,o9,m9);updateTransforms();O8+=l9;break;case A8.default.Dying:processLifeLostAnimation(l9);break;case A8.default.Won:processGameWonAnimation(l9);break;case A8.default.Lost:processGameLostAnimation(l9);break;}D8.default.render(X8.stage);}function processHeightChange(p9){if(p9<=0)return;const q9=Math.round(p9);if(q9!==M8){M8=q9;J8.default.publish('Height.Set',M8);}}function processCheckpoints(r9,s9){if(r9<=0)return;if(Q8===null||r9<=Q8){Q8=Math.floor(r9/100)*100;if(Q8===r9){Q8-=100;}P8=0;J8.default.publish('NextCheckpointHeight.Set',Q8);C8.default.stop('clock');R8=!1;C8.default.play('checkpoint');}else{P8+=s9;}let t9=1-P8/30000;if(t9<=0){P8=0;t9=0;C8.default.stop('clock');R8=!1;lostLife(null);}else if(t9<=1/3&&!R8){C8.default.play('clock');R8=!0;}J8.default.publish('TimeRemainingQuotient.Set',t9);}function processInvincibility(u9){if(S8){T8+=u9;if(T8>3000){T8=0;S8=!1;J8.default.publish('IsInvincible.Set',S8);}}}function setScroll(v9,w9,x9){x9.x=D8.default.width/2-v9*64;x9.y=640+w9*64;const y9=X8.background.position;y9.x=(x9.x+10000000)/2%1024;y9.y=(x9.y+10000000)/2%1024;}function updateTransforms(){const z9=64,A9=W8.bodies;for(let i=0;i<A9.length;i++){const B9=A9[i];if(B9.aabbNeedsUpdate){B9.updateAABB();}const C9=B9.aabb,D9=B9.interpolatedPosition,E9=!(C9.lowerBound[1]>Z8.upperBound[1]||C9.upperBound[1]<Z8.lowerBound[1]||C9.upperBound[0]<Z8.lowerBound[0]||C9.lowerBound[0]>Z8.upperBound[0]),F9=B9.sprite;if(F9){const G9=F9.position;G9.x=D9[0]*z9;G9.y=-D9[1]*z9;F9.rotation=-B9.interpolatedAngle;F9.visible=E9;}const H9=B9.spriteReflection;if(H9){const I9=H9.position;I9.x=D9[0]*z9;I9.y=-D9[1]*z9;H9.visible=E9;}}}function processLifeLostAnimation(J9){const K9=1000/J9*1.5,L9=1/K9;X8.playerBallContainer.alpha-=L9;if(X8.playerBallContainer.alpha<=0){H8.default.untintSprite(Y8.sprite);H8.default.untintSprite(Y8.spriteReflection);if(U8){U8.deactivate();H8.default.untintTerrainObject(U8);U8=null;}X8.playerBallContainer.alpha=1;I8.default.resetBody(Y8);if(N8<=0){gameLost();return;}setState(A8.default.Active);S8=!0;J8.default.publish('IsInvincible.Set',S8);C8.default.resumeAll();}}function getVisibleSprites(){const M9=X8.terrainContainer.children.map(N9=>N9 instanceof PIXI.Sprite?[N9]:N9.children.filter(O9=>O9.visible));return[X8.background].concat(X8.barContainer.children[0]).concat(...M9);}function lostLife(P9){N8--;J8.default.publish('Lives.Set',N8);E8.default.finalize();setState(A8.default.Dying);C8.default.pauseAll();if(P9){C8.default.play('lostLife');}else{C8.default.play('alarm');}}function gameLost(){setState(A8.default.Lost);C8.default.stopAll();C8.default.play('lost');V8=getVisibleSprites();for(let i=0;i<V8.length;i++){H8.default.tintSprite(V8[i],G8.default.red);}}function processGameLostAnimation(Q9){const R9=1000/Q9*3,S9=1/R9;X8.background.alpha-=S9;X8.container.alpha-=S9;if(X8.container.alpha<=0){startNewGame();}}function gameWon(){setState(A8.default.Won);C8.default.stopAll();C8.default.play('won');J8.default.publish('Menu.RequestGameWonPanel',{time:O8,lives:N8});}function processGameWonAnimation(T9){J8.default.publish('Menu.IncrementGameWonPanelAlpha',T9);}function updateScreenAABB(){const U9=Y8.position,V9=U9[0],W9=U9[1];Z8.lowerBound[0]=V9-8;Z8.lowerBound[1]=W9-18;Z8.upperBound[0]=V9+8;Z8.upperBound[1]=W9+10;}function startNewGame(){B8.default.reseed();F8.default.deactivateAll();M8=K8;J8.default.publish('Height.Set',M8);N8=L8;J8.default.publish('Lives.Set',N8);S8=!1;P8=0;Q8=K8-100;J8.default.publish('NextCheckpointHeight.Set',Q8);O8=0;I8.default.updateBodyPosition(Y8,[0,M8]);H8.default.untintSprite(Y8.sprite);H8.default.untintSprite(Y8.spriteReflection);for(let i=0;i<V8.length;i++){H8.default.untintSprite(V8[i]);}X8.background.alpha=1;X8.container.alpha=1;if(U8){H8.default.untintTerrainObject(U8);U8=null;}X8.playerBallContainer.alpha=1;X8.sawContainer.alpha=1;X8.freeSawContainer.alpha=1;C8.default.stopAll();E8.default.hide();setState(A8.default.Active);}function setState(X9){b9=X9;const Y9=b9===A8.default.Active;D8.default.view.className=Y9?'playing-field':'';J8.default.publish('State.IsActive',Y9);}J8.default.subscribe('Menu.Shown',()=>{X8.background.visible=!1;X8.container.visible=!1;X8.windLeft.visible=!1;X8.windRight.visible=!1;C8.default.pauseAll();c9=b9;setState(A8.default.Menu);});J8.default.subscribe('Menu.Hidden',()=>{X8.background.visible=!0;if(b9===A8.default.Intro){X8.terrainContainer.visible=!0;startNewGame();}else{X8.container.visible=!0;C8.default.resumeAll();setState(c9);}});J8.default.subscribe('Menu.RequestRestartGame',()=>{X8.background.visible=!0;X8.container.visible=!0;startNewGame();});J8.default.subscribe('Ball.CollisionWithFatal',Z9=>{if(!S8){U8=Z9.terrainObject;H8.default.tintSprite(Y8.sprite,G8.default.red);H8.default.tintSprite(Y8.spriteReflection,G8.default.red);H8.default.tintTerrainObject(U8,G8.default.red);lostLife(Z9);}});J8.default.subscribe('Ball.CollisionWithPlusOne',()=>{N8++;J8.default.publish('Lives.Set',N8);C8.default.play('gainedLife');});J8.default.subscribe('Ball.CollisionWithGround',()=>{gameWon();});y8.default={initialize};},function(a10,b10,c10){"use strict";Object.defineProperty(b10,"__esModule",{value:!0});const d10=c10(23),e10=c10(4);function buildPixiGraph(f10,g10){const h10=new PIXI.Container(),i10=new PIXI.Sprite(f10.clouds);i10.scale.x=i10.scale.y=2;i10.anchor.x=i10.anchor.y=0.5;i10.visible=!1;const j10=new PIXI.Container(),k10=new PIXI.Container(),l10=new PIXI.Container(),m10=new PIXI.Container(),n10=new PIXI.Container(),o10=new PIXI.Container(),p10=new PIXI.Container(),q10=new PIXI.Container(),r10=new PIXI.Container(),s10=new PIXI.Container(),t10=new PIXI.Container(),u10=new PIXI.Container(),v10=new PIXI.Container(),w10=0.75,x10=new PIXI.Sprite(f10.windLeft);x10.anchor.x=x10.anchor.y=0.5;x10.position.x=256;x10.position.y=567;x10.alpha=w10;x10.visible=!1;const y10=new PIXI.Sprite(f10.windRight);y10.anchor.x=y10.anchor.y=0.5;y10.position.x=768;y10.position.y=567;y10.alpha=w10;y10.visible=!1;const z10=new PIXI.Container();z10.interactive=!0;z10.hitArea=new PIXI.Rectangle(-10000000,-10000000,20000000,20000000);k10.addChild(l10);k10.addChild(m10);k10.addChild(n10);k10.addChild(o10);k10.addChild(r10);k10.addChild(t10);k10.addChild(u10);k10.addChild(p10);k10.addChild(q10);k10.addChild(s10);k10.addChild(v10);j10.addChild(k10);j10.addChild(z10);const A10=d10.default(f10,g10);h10.addChild(i10);h10.addChild(j10);h10.addChild(x10);h10.addChild(y10);h10.addChild(A10);e10.default.subscribe('IsInvincible.Set',B10=>{p10.alpha=B10?0.5:1;q10.alpha=B10?0.5:1;});return{stage:h10,container:j10,terrainContainer:k10,barContainer:z10,girderContainer:l10,brickContainer:m10,seesawContainer:n10,spinnerContainer:o10,sawContainer:p10,freeSawContainer:q10,twoByFourContainer:r10,playerBallContainer:s10,ballContainer:t10,ballReflectionsContainer:u10,plus1LifeContainer:v10,background:i10,windLeft:x10,windRight:y10};}b10.default=buildPixiGraph;},function(C10,D10,E10){"use strict";Object.defineProperty(D10,"__esModule",{value:!0});const F10=E10(2),G10=E10(0),H10=E10(7),I10=E10(4);let J10;function initialize(K10,L10,M10){J10=new p2.Body({mass:0.5});J10.allowSleep=!1;const N10=new p2.Circle({radius:1});N10.material=G10.default.ball;J10.addShape(N10);const O10=new PIXI.Sprite(M10.ball);O10.anchor=new PIXI.ObservablePoint(null,null,0.5,0.5);O10.tint=O10.originalTint=H10.default.blue;L10.playerBallContainer.addChild(O10);J10.sprite=O10;const P10=new PIXI.Sprite(M10.ballReflections);P10.alpha=0.5;P10.anchor=new PIXI.ObservablePoint(null,null,0.5,0.5);L10.playerBallContainer.addChild(P10);J10.spriteReflection=P10;K10.addBody(J10);K10.on('beginContact',beginContact,this);return J10;}function beginContact(Q10){const R10=Q10.bodyA,S10=Q10.bodyB;if(R10===J10||S10===J10){const T10=R10===J10?S10:R10;if(T10.isFatal){I10.default.publish('Ball.CollisionWithFatal',T10);return;}else if(T10.isGround){I10.default.publish('Ball.CollisionWithGround');return;}else if(T10.terrainObject&&T10.terrainObject.type===F10.default.Plus1Life){T10.terrainObject.deactivate();I10.default.publish('Ball.CollisionWithPlusOne');}}}D10.default={initialize};},function(U10,V10,W10){"use strict";Object.defineProperty(V10,"__esModule",{value:!0});var X10=new Promise((Y10,Z10)=>{if(window.cordova){document.addEventListener('deviceready',()=>{Y10();},!1);}else{Y10();}});V10.default=X10;},function(a11,b11,c11){"use strict";Object.defineProperty(b11,"__esModule",{value:!0});const d11=c11(0);function createWorld(){const e11=new p2.World({gravity:[0,-4.9]});e11.solver=new p2.GSSolver({tolerance:0.01,iterations:10});e11.sleepMode=p2.World.BODY_SLEEPING;addContactMaterials(e11);return e11;}function addContactMaterials(f11){f11.addContactMaterial(new p2.ContactMaterial(d11.default.wood,d11.default.wood,{restitution:0.1,stiffness:Number.MAX_VALUE,friction:0.3,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.wood,d11.default.saw,{restitution:0.3,stiffness:Number.MAX_VALUE,friction:0.6,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.wood,d11.default.brick,{restitution:0.1,stiffness:Number.MAX_VALUE,friction:0.6,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.wood,d11.default.ball,{restitution:0.4,stiffness:Number.MAX_VALUE,friction:0.3,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.brick,d11.default.brick,{restitution:0,stiffness:Number.MAX_VALUE,friction:0.8,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.brick,d11.default.ball,{restitution:0.5,stiffness:Number.MAX_VALUE,friction:0.4,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.brick,d11.default.saw,{restitution:0.3,stiffness:Number.MAX_VALUE,friction:0.4,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));f11.addContactMaterial(new p2.ContactMaterial(d11.default.saw,d11.default.saw,{restitution:0.4,stiffness:Number.MAX_VALUE,friction:0.8,relaxation:void 0,frictionStiffness:void 0,frictionRelaxation:void 0,surfaceVelocity:void 0}));}b11.default=createWorld;},function(g11,h11,i11){"use strict";Object.defineProperty(h11,"__esModule",{value:!0});var j11;(function(k11){k11[k11["PageHidden"]=0]="PageHidden";k11[k11["Intro"]=1]="Intro";k11[k11["Active"]=2]="Active";k11[k11["Dying"]=3]="Dying";k11[k11["Menu"]=4]="Menu";k11[k11["Won"]=5]="Won";k11[k11["Lost"]=6]="Lost";})(j11||(j11={}));h11.default=j11;},function(l11,m11,n11){"use strict";Object.defineProperty(m11,"__esModule",{value:!0});const o11=n11(7),p11=n11(11),q11=n11(33),r11=n11(4),s11=p11.default.width,t11=p11.default.height,u11=s11/2,v11=getTextStyle(0.5),w11=getTextStyle(0.6),x11=getTextStyle(0.7),y11=getTextStyle(0.8),z11=getTextStyle(1);function buildNavContainer(A11,B11){const C11=new PIXI.Container(),D11=buildNavBackground(A11),E11=buildIntroPanel(A11),F11=buildMenuPanel(B11),G11=buildHelpPanel(A11),H11=buildAboutPanel(),I11=buildRestartPanel(),J11=buildTopMenu(A11),K11=buildGameWonPanel(A11);C11.addChild(D11);C11.addChild(J11);C11.addChild(F11);C11.addChild(E11);C11.addChild(G11);C11.addChild(H11);C11.addChild(I11);C11.addChild(K11);r11.default.subscribe('Menu.IntroHidden',L11=>{D11.visible=!1;J11.visible=!0;r11.default.publish('Menu.RequestHide');});r11.default.subscribe('Menu.RequestShow',M11=>{J11.visible=!1;D11.visible=!0;F11.visible=!0;r11.default.publish('Menu.Shown');});r11.default.subscribe('Menu.RequestHide',N11=>{F11.visible=!1;D11.visible=!1;J11.visible=!0;r11.default.publish('Menu.Hidden');});r11.default.subscribe('Menu.RequestHelpPanel',O11=>{F11.visible=!1;G11.visible=!0;});r11.default.subscribe('Menu.RequestAboutPanel',P11=>{F11.visible=!1;H11.visible=!0;});r11.default.subscribe('Menu.RequestRestartPanel',Q11=>{F11.visible=!1;I11.visible=!0;});r11.default.subscribe('Menu.PanelHidden',R11=>{F11.visible=!0;});r11.default.subscribe('Menu.RequestRestartGame',S11=>{F11.visible=!1;D11.visible=!1;J11.visible=!0;});r11.default.subscribe('Menu.RequestGameWonPanel',T11=>{J11.visible=!1;K11.visible=!0;K11.alpha=0;});return C11;}function getTextStyle(U11){return{font:{name:'Constantia',size:128*U11},tint:o11.default.yellow};}function buildText(V11,W11){const X11=W11.style||w11,Y11=new PIXI.extras.BitmapText(V11,X11);if(W11.left){Y11.position.x=Math.round(W11.left);}else if(W11.right){Y11.position.x=Math.round(W11.right-Y11.width);}else if(W11.xCenter){Y11.position.x=Math.round(W11.xCenter-Y11.width/2);}if(W11.top){Y11.position.y=Math.round(W11.top);}else if(W11.bottom){Y11.position.y=Math.round(W11.bottom-Y11.height);}else if(W11.yCenter){Y11.position.y=Math.round(W11.yCenter-Y11.height/2);}if(W11.callback){Y11.interactive=!0;Y11.buttonMode=!0;const highlight=e=>{const Z11=e.currentTarget;Z11.tint=o11.default.orange;},unhighlight=e=>{const a12=e.currentTarget;a12.tint=o11.default.yellow;};Y11.on('mousedown',e=>{highlight(e);}).on('touchstart',e=>{highlight(e);});Y11.on('mouseup',e=>{unhighlight(e);W11.callback();}).on('mouseupoutside',e=>{unhighlight(e);}).on('touchend',e=>{unhighlight(e);W11.callback();}).on('touchendoutside',e=>{unhighlight(e);});}return Y11;}function buildHelpContent(b12){const c12=new PIXI.Container(),d12=x11,e12=buildText('Guide the ball to the ground',{xCenter:u11,yCenter:320,style:d12});c12.addChild(e12);const f12=buildText('by drawing bars, like this:',{xCenter:u11,yCenter:420,style:d12});c12.addChild(f12);const g12=new PIXI.Sprite(b12.helpHand);g12.anchor.x=g12.anchor.y=0.5;g12.position.x=512;g12.position.y=665;c12.addChild(g12);const h12=buildText('Avoid saws:',{xCenter:u11,yCenter:850,style:d12});c12.addChild(h12);const i12=new PIXI.Sprite(b12.saw);i12.anchor.x=i12.anchor.y=0.5;i12.position.x=512;i12.position.y=1000;c12.addChild(i12);const j12=buildText('Collect extra lives:',{xCenter:u11,yCenter:1150,style:d12});c12.addChild(j12);const k12=new PIXI.Sprite(b12.plus1Life);k12.anchor.x=k12.anchor.y=0.5;k12.position.x=512;k12.position.y=1280;c12.addChild(k12);const l12=buildText('Beat the timer.',{xCenter:u11,yCenter:1420,style:d12});c12.addChild(l12);return c12;}function buildNavBackground(m12){const n12=new PIXI.Sprite(m12.clouds);n12.scale.x=n12.scale.y=2;n12.anchor.x=n12.anchor.y=0.5;n12.alpha=0.8;return n12;}function buildTopMenu(o12){const p12=new PIXI.Container();p12.visible=!1;const q12=buildText('Height',{left:32,top:16});p12.addChild(q12);const r12=buildText(getHeightText(1000),{left:q12.position.x+q12.width+16,top:16});p12.addChild(r12);r11.default.subscribe('Height.Set',s12=>{r12.text=getHeightText(s12);});const t12=buildText('Lives: 9:',{left:0,top:0}),u12=buildText('Lives:',{left:s11*0.6-t12.width/2,top:16});p12.addChild(u12);const v12=buildText(10 .toString(),{left:u12.position.x+u12.width+16,top:16});p12.addChild(v12);r11.default.subscribe('Lives.Set',w12=>{v12.text=w12.toString();});const x12=buildText('Menu',{right:s11-32,top:16,callback:()=>{r11.default.publish('Menu.RequestShow');}});p12.addChild(x12);const y12=buildText(getTimeRemainingText(900),{left:32,top:106,style:v11});p12.addChild(y12);r11.default.subscribe('NextCheckpointHeight.Set',z12=>{y12.text=getTimeRemainingText(z12);});const A12=new PIXI.Sprite(o12.timeBar);A12.position.x=392;A12.position.y=128;p12.addChild(A12);const B12=new PIXI.Sprite(o12.timeBarTime);B12.position.x=394;B12.position.y=130;B12.alpha=0.85;p12.addChild(B12);r11.default.subscribe('TimeRemainingQuotient.Set',C12=>{B12.width=C12*596;B12.tint=q11.default(o11.default.yellow,o11.default.red,C12);if(C12<=0){y12.tint=o11.default.red;}else{y12.tint=o11.default.yellow;}});return p12;}function buildIntroPanel(D12){const E12=new PIXI.Container();E12.addChild(buildHelpContent(D12));E12.addChild(buildText('Start >',{xCenter:u11,yCenter:t11*0.92,style:z11,callback:()=>{E12.visible=!1;r11.default.publish('Menu.IntroHidden');}}));return E12;}function getHeightText(F12){return F12+'m';}function getTimeRemainingText(G12){return'Time to '+G12.toString()+'m:';}function getSoundText(H12){return'Sound '+(H12?'on':'off');}function buildMenuPanel(I12){const J12=new PIXI.Container(),K12=t11/6,L12=y11,M12=buildText(getSoundText(I12),{xCenter:u11,yCenter:K12,style:L12,callback:I12?()=>{r11.default.publish('Sound.Toggle');}:null});if(I12){r11.default.subscribe('Sound.Enable',N12=>{M12.text=getSoundText(N12);});}else{M12.alpha=0.5;}J12.addChild(M12);J12.addChild(buildText('Help',{xCenter:u11,yCenter:K12*2,style:L12,callback:()=>{r11.default.publish('Menu.RequestHelpPanel');}}));J12.addChild(buildText('About',{xCenter:u11,yCenter:K12*3,style:L12,callback:()=>{r11.default.publish('Menu.RequestAboutPanel');}}));J12.addChild(buildText('Restart',{xCenter:u11,yCenter:K12*4,style:L12,callback:()=>{r11.default.publish('Menu.RequestRestartPanel');}}));J12.addChild(buildText('Return to game',{xCenter:u11,yCenter:K12*5,style:L12,callback:()=>{r11.default.publish('Menu.RequestHide');}}));J12.visible=!1;return J12;}function buildBackButton(O12){return buildText('< Back',{xCenter:u11,yCenter:t11*0.92,style:z11,callback:()=>{O12.visible=!1;r11.default.publish('Menu.PanelHidden');}});}function buildHelpPanel(P12){const Q12=new PIXI.Container();Q12.addChild(buildHelpContent(P12));Q12.addChild(buildBackButton(Q12));Q12.visible=!1;return Q12;}function buildAboutPanel(){const R12=new PIXI.Container(),S12=buildText('Descensus 2',{xCenter:u11,yCenter:600,style:y11});R12.addChild(S12);const T12=buildText('v1.0.2',{xCenter:u11,yCenter:700,style:x11});R12.addChild(T12);const U12=buildText('By Tom W Hall',{xCenter:u11,yCenter:900});R12.addChild(U12);const V12=buildText('Boolean Operations Limited',{xCenter:u11,yCenter:1000});R12.addChild(V12);const W12=buildText('http://booleanoperations.com',{xCenter:u11,yCenter:1100});R12.addChild(W12);R12.addChild(buildBackButton(R12));R12.visible=!1;return R12;}function buildRestartPanel(){const X12=y11,Y12=new PIXI.Container();Y12.addChild(buildText('Restart game?',{xCenter:u11,yCenter:t11*0.45,style:X12}));Y12.addChild(buildText('No',{xCenter:s11/3,yCenter:t11*0.75,callback:()=>{Y12.visible=!1;r11.default.publish('Menu.PanelHidden');},style:X12}));Y12.addChild(buildText('Yes',{xCenter:s11*(2/3),yCenter:t11*0.75,callback:()=>{Y12.visible=!1;r11.default.publish('Menu.RequestRestartGame');},style:X12}));Y12.visible=!1;return Y12;}function buildGameWonPanel(Z12){const a13=new PIXI.Container();a13.addChild(new PIXI.Sprite(Z12.paper));function getTimeText(b13){const c13=b13/1000,d13=Math.floor(c13/60),e13=Math.round(c13%60);return'with a time of '+d13.toString()+':'+(e13<10?'0':'')+e13.toString();}function getLivesText(f13){return'and with '+f13.toString()+' '+(f13===1?'life':'lives')+' remaining';}a13.addChild(buildText('This certifies',{xCenter:u11,yCenter:400,style:x11}));a13.addChild(buildText('that you have completed',{xCenter:u11,yCenter:500,style:x11}));a13.addChild(buildText('Descensus 2',{xCenter:u11,yCenter:700,style:z11}));const g13=buildText(getTimeText(0),{xCenter:u11,yCenter:900,style:x11});a13.addChild(g13);const h13=buildText(getLivesText(10),{xCenter:u11,yCenter:1000,style:x11});a13.addChild(h13);r11.default.subscribe('Menu.RequestGameWonPanel',i13=>{g13.text=getTimeText(i13.time);g13.position.x=Math.round(u11-g13.width/2);h13.text=getLivesText(i13.lives);h13.position.x=Math.round(u11-h13.width/2);});r11.default.subscribe('Menu.IncrementGameWonPanelAlpha',j13=>{const k13=1000/j13*5,l13=1/k13;a13.alpha=Math.min(1,a13.alpha+l13);});a13.addChild(buildText('New Game >',{xCenter:u11,yCenter:t11*0.92,style:y11,callback:()=>{a13.visible=!1;r11.default.publish('Menu.RequestRestartGame');}}));a13.visible=!1;return a13;}m11.default=buildNavContainer;},function(m13,n13,o13){"use strict";Object.defineProperty(n13,"__esModule",{value:!0});const p13=o13(2),q13=o13(3),r13=o13(0),s13=o13(1);class Brick extends q13.default{constructor(t13,u13,v13){super(p13.default.Brick,t13,u13);const w13=new p2.Body({mass:1});w13.allowSleep=!1;const x13=new PIXI.Sprite(v13.brick);this.addBody(w13,x13,u13.brickContainer);const y13=new p2.Box({width:2,height:0.625});y13.material=r13.default.brick;this.addShape(w13,y13);}activate(z13,A13){super.activate();s13.default.updateBodyPosition(this.bodies[0],z13,A13);}}n13.default=Brick;},function(B13,C13,D13){"use strict";Object.defineProperty(C13,"__esModule",{value:!0});const E13=D13(3),F13=D13(2),G13=D13(0),H13=D13(1);class FreeSaw extends E13.default{constructor(I13,J13,K13){super(F13.default.FreeSaw,I13,J13);const L13=this.sawBody=new p2.Body({mass:0.5});L13.damping=0.5;L13.isFatal=!0;L13.allowSleep=!1;const M13=new PIXI.Sprite(K13.sawSmall);this.addBody(L13,M13,J13.freeSawContainer);const N13=new p2.Circle({radius:0.75});N13.material=G13.default.saw;this.addShape(L13,N13);}activate(O13,P13){super.activate();H13.default.updateBodyPosition(this.sawBody,O13);this.sawBody.angularVelocity=-2;if(P13){this.sawBody.velocity=P13;}}}C13.default=FreeSaw;},function(Q13,R13,S13){"use strict";Object.defineProperty(R13,"__esModule",{value:!0});const T13=S13(2),U13=S13(3),V13=S13(0),W13=S13(1);class Girder extends U13.default{constructor(X13,Y13,Z13){super(T13.default.Girder,X13,Y13);const a14=new p2.Body({mass:30});a14.gravityScale=0;const b14=new PIXI.Sprite(Z13.girder);this.addBody(a14,b14,Y13.girderContainer);const c14=new p2.Box({width:4,height:1});c14.material=V13.default.wood;this.addShape(a14,c14);}activate(d14,e14){super.activate();W13.default.updateBodyPosition(this.bodies[0],d14,e14);}}R13.default=Girder;},function(f14,g14,h14){"use strict";Object.defineProperty(g14,"__esModule",{value:!0});const i14=h14(3),j14=h14(2),k14=h14(0),l14=h14(1);class Plus1Life extends i14.default{constructor(m14,n14,o14){super(j14.default.Plus1Life,m14,n14);const p14=this.plus1LifeBody=new p2.Body({mass:0.5});p14.allowSleep=!1;p14.damping=0.8;const q14=new PIXI.Sprite(o14.plus1Life);this.addBody(p14,q14,n14.plus1LifeContainer);const r14=new p2.Box({width:2,height:1.203125});r14.material=k14.default.wood;this.addShape(p14,r14);}activate(s14){super.activate();l14.default.updateBodyPosition(this.plus1LifeBody,s14);}}g14.default=Plus1Life;},function(t14,u14,v14){"use strict";Object.defineProperty(u14,"__esModule",{value:!0});const w14=v14(3),x14=v14(2),y14=v14(0),z14=v14(5),A14=v14(1);class Saw extends w14.default{constructor(B14,C14,D14){super(x14.default.Saw,B14,C14);this.speed=-6;const E14=this.sawBody=new p2.Body({mass:1});E14.gravityScale=0;E14.isFatal=!0;const F14=new PIXI.Sprite(D14.saw);this.addBody(E14,F14,C14.sawContainer);const G14=new p2.Circle({radius:1});G14.material=y14.default.saw;this.addShape(E14,G14);const H14=this.anchorBody=z14.default.getAnchor(E14);this.addBodyHidden(H14);const I14=z14.default.getAnchorConstraint(E14,H14,null,!0);I14.setMotorSpeed(this.speed);this.addConstraint(I14);}activate(J14){super.activate();A14.default.updateBodyPosition(this.sawBody,J14);A14.default.updateBodyPosition(this.anchorBody,J14);}}u14.default=Saw;},function(K14,L14,M14){"use strict";Object.defineProperty(L14,"__esModule",{value:!0});const N14=M14(12),O14=M14(2),P14=M14(6),Q14=M14(0),R14=M14(1);class SawSnake extends N14.default{constructor(S14,T14,U14,V14,W14){super(S14,T14,U14,V14,W14);this.sawSpeed=-6;this.sawBodies=[];this.type=O14.default.SawSnake;const X14=this.segments;for(let i=0;i<X14.length;i++){const Y14=X14[i];this.addSaw(Y14,U14);}}addSaw(Z14,a15){const b15=new p2.Body({mass:1,position:[Z14.position[0],Z14.position[1]],angle:P14.default.random0To1()*(2*Math.PI)});b15.gravityScale=0;b15.isFatal=!0;const c15=new PIXI.Sprite(a15.saw);this.addBody(b15,c15,this.pixiGraph.sawContainer);this.sawBodies.push(b15);const d15=new p2.Circle({radius:1});d15.material=Q14.default.wood;this.addShape(b15,d15);const e15=new p2.RevoluteConstraint(b15,Z14,{localPivotA:[0,0],localPivotB:[0,0]});e15.enableMotor();e15.setMotorSpeed(this.sawSpeed);e15.collideConnected=!1;this.addConstraint(e15);}activate(f15,g15,h15){super.activate(f15,g15,h15);const i15=this.segments,j15=this.sawBodies;for(let i=0;i<i15.length;i++){const k15=i15[i].position,l15=j15[i];R14.default.updateBodyPosition(l15,[k15[0],k15[1]]);}}}L14.default=SawSnake;},function(m15,n15,o15){"use strict";Object.defineProperty(n15,"__esModule",{value:!0});const p15=o15(13),q15=o15(2),r15=o15(0),s15=o15(1);class SawSpinner extends p15.default{constructor(t15,u15,v15){super(t15,u15,v15);this.sawSpeed=-6;this.sawOffsets=[[0,2.5],[0,-2.5],[-2.5,0],[2.5,0]];this.sawBodies=[];this.type=q15.default.SawSpinner;const w15=this.spinnerBody,x15=this.sawOffsets;for(let i=0;i<x15.length;i++){this.addSaw(w15,x15[i],v15);}}addSaw(y15,z15,A15){const B15=y15.position,C15=new p2.Body({mass:1,position:[B15[0]+z15[0],B15[1]+z15[1]]});C15.gravityScale=0;C15.isFatal=!0;const D15=new PIXI.Sprite(A15.saw);this.addBody(C15,D15,this.pixiGraph.sawContainer);this.sawBodies.push(C15);const E15=new p2.Circle({radius:1});E15.material=r15.default.wood;this.addShape(C15,E15);const F15=new p2.RevoluteConstraint(C15,y15,{localPivotA:[0,0],localPivotB:z15});F15.enableMotor();F15.setMotorSpeed(this.sawSpeed);F15.collideConnected=!1;this.addConstraint(F15);}setSawPositions(G15){const H15=this.sawBodies,I15=this.sawOffsets;for(let i=0;i<I15.length;i++){const J15=I15[i];s15.default.updateBodyPosition(H15[i],[G15[0]+J15[0],G15[1]+J15[1]]);}}activate(K15,L15){super.activate(K15,L15);this.setSawPositions(K15);}}n15.default=SawSpinner;},function(M15,N15,O15){"use strict";Object.defineProperty(N15,"__esModule",{value:!0});const P15=O15(3),Q15=O15(2),R15=O15(0),S15=O15(5),T15=O15(1);class Seesaw extends P15.default{constructor(U15,V15,W15){super(Q15.default.Seesaw,U15,V15);const X15=new p2.Body({mass:3});X15.gravityScale=0;const Y15=new PIXI.Sprite(W15.seesaw);this.addBody(X15,Y15,V15.seesawContainer);const Z15=new p2.Box({width:6,height:1});Z15.material=R15.default.wood;this.addShape(X15,Z15);const a16=S15.default.getAnchor(X15);this.addBodyHidden(a16);this.addConstraint(S15.default.getAnchorConstraint(X15,a16));}activate(b16,c16=!1){super.activate();const d16=this.bodies;for(let i=0;i<d16.length;i++){const e16=this.bodies[i],f16=c16?-Math.PI/2:0;T15.default.updateBodyPosition(e16,b16,f16);}}}N15.default=Seesaw;},function(g16,h16,i16){"use strict";Object.defineProperty(h16,"__esModule",{value:!0});const j16=i16(6);function getRandomPosition(k16,l16,m16,n16,o16){const p16=10;let q16=0;const r16=l16.lowerBound[0]+m16/2,s16=l16.upperBound[0]-m16/2,t16=l16.lowerBound[1]+n16/2,u16=l16.upperBound[1]-n16/2;while(q16<p16){q16++;const x=j16.default.randomInt(r16,s16),y=j16.default.randomInt(t16,u16),v16=[x,y];if(!isBlocked(k16,v16,m16+o16,n16+o16)){return v16;}}return null;}function getMidHeight(w16){return(w16.lowerBound[1]+w16.upperBound[1])/2;}function getCountMoreAsDescends(x16,min,max,A16){if(x16>A16)return 0;const B16=(A16-x16)/A16,C16=Math.round(min+B16*(max-min));return C16;}function getCountLessAsDescends(D16,min,max,G16){if(D16>G16)return 0;const H16=(G16-D16)/G16,I16=Math.round(min+(1-H16)*(max-min));return I16;}function updateAABBs(J16){const K16=J16.bodies;for(let i=0;i<K16.length;i++){const L16=K16[i];if(L16.aabbNeedsUpdate){L16.updateAABB();}}}function isBlocked(M16,N16,O16,P16){const Q16=O16/2,R16=P16/2,S16=M16.bodies;for(let i=0;i<S16.length;i++){const T16=S16[i],U16=T16.aabb;if(!(U16.upperBound[0]<N16[0]-Q16||U16.lowerBound[0]>N16[0]+Q16||U16.upperBound[1]<N16[1]-R16||U16.lowerBound[1]>N16[1]+R16)){return!0;}}return!1;}h16.default={getRandomPosition,getMidHeight,getCountMoreAsDescends,getCountLessAsDescends,updateAABBs};},function(V16,W16,X16){"use strict";Object.defineProperty(W16,"__esModule",{value:!0});function blendColors(Y16,Z16,a17){var hex=function(num){const c17=num.toString(16);return c17.length===1?'0'+c17:c17;};const d17=hex(Y16),e17=hex(Z16),r=Math.ceil(parseInt(d17.substring(0,2),16)*a17+parseInt(e17.substring(0,2),16)*(1-a17)),g=Math.ceil(parseInt(d17.substring(2,4),16)*a17+parseInt(e17.substring(2,4),16)*(1-a17)),b=Math.ceil(parseInt(d17.substring(4,6),16)*a17+parseInt(e17.substring(4,6),16)*(1-a17)),f17=hex(r)+hex(g)+hex(b);return parseInt(f17,16);}W16.default=blendColors;},function(g17,h17,i17){"use strict";Object.defineProperty(h17,"__esModule",{value:!0});function tintTerrainObject(j17,k17){const l17=j17.bodies;for(let i=0;i<l17.length;i++){const m17=l17[i];tintSprite(m17.sprite,k17);tintSprite(m17.spriteReflection,k17);}}function untintTerrainObject(n17){const o17=n17.bodies;for(let i=0;i<o17.length;i++){const p17=o17[i];untintSprite(p17.sprite);untintSprite(p17.spriteReflection);}}function tintSprite(q17,r17){if(q17){q17.tint=r17;}}function untintSprite(s17){if(s17){s17.tint=s17.originalTint||0xffffff;}}h17.default={tintTerrainObject,untintTerrainObject,tintSprite,untintSprite};},function(t17,u17,v17){"use strict";Object.defineProperty(u17,"__esModule",{value:!0});const w17=v17(0);let x17;function initialize(y17,z17,A17){x17=new p2.Body();x17.isGround=!0;const B17=new p2.Box({width:32,height:18});B17.material=w17.default.wood;x17.addShape(B17);const C17=new PIXI.Sprite(A17.ground);C17.scale.x=C17.scale.y=2;C17.anchor=new PIXI.ObservablePoint(null,null,0.5,0.5);z17.terrainContainer.addChild(C17);x17.sprite=C17;y17.addBody(x17);y17.on('beginContact',beginContact,this);return x17;}function beginContact(D17){const E17=D17.bodyA,F17=D17.bodyB;if(!(E17===x17||F17===x17))return;const G17=E17===x17?F17:E17;if(G17.terrainObject){G17.terrainObject.deactivate();}}u17.default={initialize};},function(H17,I17,J17){"use strict";Object.defineProperty(I17,"__esModule",{value:!0});const K17=J17(20),L17=J17(16),M17=J17(15),N17=J17(14),O17=J17(21),P17=J17(18),Q17=J17(10),R17=J17(19),S17=J17(8),T17=J17(9),U17=J17(17);K17.default.then(()=>{let V17=!1;M17.default.then(W17=>{V17=!0;T17.default.initialize(W17);}).catch(X17=>{}).then(()=>{Promise.all([L17.default,N17.default]).then(Y17=>{const Z17=Y17[0],a18=O17.default(),b18=P17.default(Z17,V17);Q17.default.initialize(a18,b18,Z17);const c18=R17.default.initialize(a18,b18,Z17);S17.default.initialize(a18,b18,Z17);document.getElementById('loading').style.display='none';document.getElementById('viewport').style.display='block';U17.default.initialize(a18,b18,c18);});});});}]);